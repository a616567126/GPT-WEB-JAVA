<div align="center">
    <p style="font-size:40px;font-weight: 800;color: coral">Siana 智能Ai机器人 </p>
</div>
<div align="center" style="text-align:center;margin-top:30px;margin-bottom:20px">
    <img alt="Java version" src="https://img.shields.io/static/v1?label=openjdk&message=8&logo=openjdk" /> &nbsp; &nbsp;
    <img alt="MySql version" src="https://img.shields.io/static/v1?label=mysql&message=8.0&logo=mysql&color=green" />&nbsp; &nbsp;
    <img alt="Redis version" src="https://img.shields.io/static/v1?label=redis&message=7&logo=redis&color=ff69b4" />&nbsp; &nbsp;
    <a style="padding-left:10px"><img src="https://img.shields.io/github/stars/a616567126/GPT-WEB-JAVA"/></a>&nbsp; &nbsp;
    <a style="padding-left:10px"><img src="https://img.shields.io/github/forks/a616567126/GPT-WEB-JAVA?color=red&logo=red"/></a>&nbsp; &nbsp;


</div>

<h1 align="center"> 🎉 2.0全新版本，全新ui，全新体验</h1>  

<p align="center"> 演示地址：https://ai.v-wim.xyz</p>
<p align="center">🧧 2.0全新ui，客户端与管理前端源码不开源，加入VIP群持续更新，扫码下方作者微信添加好友咨询加群</p>
<p align="center"> 后台管理ui演示地址地址：https://github.com/a616567126/GPT-WEB-JAVA/wiki/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86ui%E6%BC%94%E7%A4%BA </p>


  ## 👨‍🚀  Major Function
<h2>📌 客户端</h2>

* **登录**
* **临时用户**
* **注册（公众号注册，邮箱注册，账号密码注册）**
* **GPt对话**
*     1.基于SSE WebSocket流式推送
*     2.支持3.5,4.0等模型
*     3.支持官方,第三方api地址
* **GPT 画图**
* **Midjourney画图**
*     1./imagine(文生图)
*     2./describe(图生文)
*     3.重做
*     4.--relax,--fast(切换出图模式)
*     5.U放大，V变换
*     6.Strong,Subtle,U2x,U4x,ZoomOut 2x,ZoomOut 1.5x,➡️⬅️⬆️⬇️位置偏移
*     7./shorten(咒语解析)
*     7./blend(混合生图)
*     8.垫图
*     9.账号池
* **Stable-Diffusion画图**
*     1.模型选择
*     2.Lora选择
*     3.支持高清修复
*     4.垫图
* **个人信息展示（剩余次数，身份，昵称）**
* **个人信息修改（头像，密码）**
* **产品查询购买**
* **订单查询**
* **支付方式 易支付、卡密兑换**
* **图片存储方式本地/oss存储，可动态配置**



<h2>📌 管理端</h2>

* **首页（数据统计）**
* **支付配置**
* **对KEY配置**
* **用户管理**
* **MJ账号池**
* **订单管理**
* **公告管理**
* **产品管理**
* **系统配置**

<h2>📌 公众号</h2>  

* **扫码登录、注册**
* **Midjourney画图**
* **SD画图（开发中）**
* **GPT对话（开发中）**
* **卡密获取、兑换**

## 客户端UI演示（Vue2开发）
1.登录
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/fd64021d-5ed5-4fdf-a284-5e9b87e8e736)  
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/41f8679a-825e-4533-8412-d31ff7a83549)
2.GPT对话
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/3fe7bd7d-2e29-4d38-9606-4436e4a82fd3)
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/20d3d865-c9ab-4868-ba7b-52423d5cd4b6)
3.GPT画图
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/09f9b995-fdd8-4406-8eb5-9d178e83e2da)
4.Midjourney
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/e9677882-4520-4ef3-97f1-d63dfa4c361a)

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/519403d3-7ecb-4d6b-9257-ceaf23a1376c)
5.Stable Diffusion
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/b33a5d46-02a9-420f-8fbc-27602f2ac112)
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/39024f1d-3db5-41be-9c80-b6ab297d50df)
6.画廊
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/33de4db7-81f7-405a-b49b-abb5207de0c5)
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/042a51d5-6c94-4729-b790-cb3df4f81481)
7.我的
![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/40b3dd94-328b-499f-9d7c-24ce95c046f3)


## 移动端UI演示（uniapp开发，可打包小程序,app,H5等）
1.登录  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/67e7ba32-cf5f-4559-bbe1-b16e15fbcf88)  

2.菜单页面  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/96dea4e3-43aa-466a-b637-b7b108f9dda5)  

3.GPT对话  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/53427560-8907-4075-8b78-5a8ec1074e2b)  

4.GPT画图  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/505678c6-6fb6-4282-9636-5f65031fd043)  

5.Stable Diffusion  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/bc5bcb88-87b8-4c2b-bb34-7aa37f278f8f)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/dd042725-0513-4dd3-aaf5-2f0148b82714)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/9621bc7f-6a69-48e6-b0a6-ecf6657a6a58)  

6.Midjourney  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/96ae2a4a-ce98-469a-876d-72d2e21e7fad)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/5a7e3ceb-ee5a-414f-b69f-f577ed797d63)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/38f6bb54-b6f9-4778-955b-cea46fe73db0)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/e0b11766-035d-4954-bd82-509f769fc9b4)  

7.画廊  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/415c70f7-21a1-4b7a-85a5-420e008655ed)  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/aad15323-980a-48d4-8b26-65db2fb892d7)  

8.个人中心  

![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/ef240192-5fab-4f60-a4ef-f5ee3122f001)









## 💻  INSTALL AND START  
       安装步骤
        1.安装mysql，redis，安装jdk1.8 也可使用个更高版本但不建议
        2.创建数据库名字为：intelligent_bot
        3.导入src/resources/下的intelligent_bot.sql 文件
        4.修改yml中的数据库配置与redis配置
        5.在根目录下创建临时上传路径/www/temp/data 或自己根据自己实际的路径来配置，注意修改yml中第17行
        6.增加上传图片目录/www/uploads/ 或自己根据自己实际路径来配置，注意修改sys_config表中的图片上传路径
        7.打包java代码复制到/usr/local/siana/下，后续都已这个为准，可根据自己的项目实际位置自行更改
        8.执行nohup java -jar Intelligent-Bot-0.0.1-SNAPSHOT.jar 启动后台
        11.查看日志是否有异常日志，若没有则启动成功
        12.管理员账号admin密码123456，根据自己需求合理增加或修改表内数据，初始化sql只为正常启动代码
        ----------------以下说明为客户端与管理端部署说明---------------------
        13.在服务器上配置启动好服务之后，在客户端与管理端修改api.js里的接口地址
        14.使用npm run dev 测试是否接口请求正常
        15.使用npm run build 打包代码，并部署到服务器
        16.可使用nginx，代理图片服务器，客户端及管理端页面





## 🕹  Precautions For Using Nginx

<p align="center">🪧  若使用nginx反向代理到后端需要增加SEE支持，与SEE长连接时间 </p>

```powershell
 server {
        listen 443 ssl http2;  # 1.1版本后这样写
        server_name api.baidu.com; #填写绑定证书的域名
        ssl_certificate /www/server/nginx/ssl/baidu.pem;# 指定证书的位置，绝对路径
        ssl_certificate_key /www/server/nginx/ssl/baidu.key; # 绝对路径，同上
        ssl_session_timeout 5m;
        ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #按照这个协议配置
        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;#按照这个套件配置
        ssl_prefer_server_ciphers on;
        location / {
          proxy_pass http://127.0.0.1:8080/;   #转发到tomcat
          proxy_set_header Host $http_host;  ##proxy_set_header用来重定义发往后端服务器的请求头
          proxy_set_header X-Real-IP $remote_addr;
          proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
          proxy_set_header X-Forwarded-Proto $scheme;
          proxy_buffering off;
          proxy_http_version  1.1;
          proxy_read_timeout 600s; ##设置SSE长链接保持时间为 600s
          }
    }
    server {
         #SSL 默认访问端口号为 443
         listen 443 ssl http2; 
         #请填写绑定证书的域名客户端、管理端通用
         server_name bot.baidu.com;
         #请填写证书文件的相对路径或绝对路径
         ssl_certificate /www/server/nginx/ssl/bot/bot.baidu.com.crt;
         #请填写私钥文件的相对路径或绝对路径
         ssl_certificate_key /www/server/nginx/ssl/bot/bot.baidu.com.key;
         ssl_session_timeout 5m;
         #请按照以下协议配置
         ssl_protocols TLSv1.2 TLSv1.3; 
         #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。
         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; 
         ssl_prefer_server_ciphers on;
         location / {
             #网站主页路径。此路径仅供参考，具体请您按照实际目录操作。
             #例如，您的网站主页在 Nginx 服务器的 /etc/www 目录下，则请修改 root 后面的 html 为 /etc/www。
            root    /usr/local/siana/bot;
            index   index.html;
            try_files  $uri $uri/ /index.html;
            }
   }
   server {
        listen       80;
        server_name  bot.baidu.com;#客户端、管理端通用80强制443
        rewrite ^ https://$http_host$request_uri? permanent;

    }
   server {
        listen 443 ssl http2;
        server_name img.baidu.com; #图片服务器
        location    / {
            root   /www/uploads/;
            charset utf-8;          #显示中文
            add_header 'Access-Control-Allow-Origin' '*'; #允许来自所有的访问地址
            add_header 'Access-Control-Allow-Credentials' 'true';
            add_header 'Access-Control-Allow-Methods' 'GET, PUT, POST, DELETE, OPTIONS'; #支持请求方式
            add_header 'Access-Control-Allow-Headers' 'Content-Type,*';
        }
         #请填写证书文件的相对路径或绝对路径
         ssl_certificate /www/server/nginx/ssl/img/img.xx.crt;
         #请填写私钥文件的相对路径或绝对路径
         ssl_certificate_key /www/server/nginx/ssl/img/img.xx.key;
         ssl_session_timeout 5m;
         #请按照以下协议配置
         ssl_protocols TLSv1.2 TLSv1.3; 
         #请按照以下套件配置，配置加密套件，写法遵循 openssl 标准。
         ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; 
         ssl_prefer_server_ciphers on;
    }
```



## 💬  USE GPT
- 1.在gpt_key中配置对应的gpt key，注意区分3.5与4.0
- 2.若国内环境使用请使用代理访问，或使用cloudflare搭理，[教程地址](https://github.com/x-dr/chatgptProxyAPI)
- 3.gpt使用sse方式进行消息推送与前端交互，若使用nginx请查看上方nginx配置


## 🧩  USE Image Upload(图片上传)
- 1.创建指定的文件夹如：/usr/local/upload
- 2.创建成功后在"sys_config"表中"img_upload_url"配置第一步创建的目录记得最后边加上"/"如：/usr/local/upload/
- 3.使用nginx进行文件夹代理
- 4.nginx代理的域名或ip配置到sys_config中img_return_url如："https://www.baidu.com"
- 5.上传的图片会以每天的年月日来进行创建文件夹
- 6.图片名称分为两种，Midjourney的名字为任务id，其余的图片为当前时间戳
- 7.图片最终的地址为："img_return_url"+"img_upload_url"+文件名，如："https://www.baidu.com/20230618/123.jpg"


## 🎨  USE Stable-Diffusion
- 1.在"sd_model"表中配置模型（名字（全部内容包括后缀），图片）
- 2.若有lora在"sd_lora"表中配置lora（名字，图片）
- 3.配置"sys_config"表中"is_open_sd"为1，开启状态
- 4.配置"sys_config"表中"sd_url"的地址，本地默认地址为http://127.0.0.1:7860(记得打开api开关)


## 🎨  USE Midjourney
- 1.注册 MidJourney创建自己的频道、[参考地址](https://docs.midjourney.com/docs/quick-start)
- 2.添加成功之后查看浏览器中的地址如：<SMALL>https://discord.com/channels/123/456 </SMALL> 其中123为mj_guild_id,456为mj_channel_id
- 3.获取mj_user_token，浏览器打开F12随便发送一个信息查看Network,Authorization为用户token


## 🪜  USE Proxy
<p align="center">GPT、Midjourney 国内网络环境下使用代理访问</p>  

- 代理使用，配置流程、[参考地址](https://github.com/a616567126/GPT-WEB-JAVA/wiki/%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E8%AF%B7%E6%B1%82GPT%E3%80%81Midjourney)


## 📄  USE Baidu  
<p align="center">GPT、Midjourney、Stable-Diffusion 使用文本审核，Midjourney、Stable-Diffusion，使用百度翻译</p>    

- 1.百度翻译申请，配置流程、[参考地址](https://github.com/a616567126/GPT-WEB-JAVA/wiki/%E7%94%B3%E8%AF%B7%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91)
- 1.百度文本审核申请，配置流程、[参考地址](https://github.com/a616567126/GPT-WEB-JAVA/wiki/%E7%94%B3%E8%AF%B7%E7%99%BE%E5%BA%A6%E5%86%85%E5%AE%B9%E5%AE%A1%E6%A0%B8%E5%B9%B3%E5%8F%B0-%E6%96%87%E6%9C%AC)


## 📄  USE Google Bard
 - 1.访问https://bard.google.com/并登录账号密码
 - 2.F12获取cookie![image](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/439e1038-a181-4055-ad9e-e3478c4dfc74)
 - 3.组合token'__Secure-1PSID'+';'+__Secure-1PSIDTS 例如:aAjs4boxxxx;sidts-xxxx
 - 4.将组合好的token配置到sys_config中的bard_token字段

## 🍾  Put It Last
- 作者使用服务器地址：[浅夏云](https://www.qxqxa.com/aff/ZGWPEDLQ)
- 作者使用机场地址：[新华云](https://newhua99.com/#/register?code=fMYmE5Ri)
- 默认启动时需配置如下三个表的数据（根据自己实际情况）
  - gpt_key
  - pay_config
  - sys_config
  - 项目启动时会加载对应参数到redis中，如果手动修改数据库，需要在redis中修改对应参数，防止不生效
- FlagStudio地址：http://flagstudio.baai.ac.cn/


**支付配置(pay_config)**
字段|描述|注意
-|:-:|-:
pid|易支付商户id|无
secret_key|易支付商户秘钥|无
submit_url|易支付支付请求域名|易支付发起支付的api地址，例如：https://pay888.mfysc.shop/submit.php
api_url|易支付订单查询api|后端核对订单时，易支付使用订单查询的api地址例如：https://pay888.mfysc.shop/api.php
wx_appid|微信支付的appid|无
wx_mchid|微信支付商户号|微信支付平台-商户信息-微信支付商户号
wx_v3_secret|微信apiv3秘钥|微信支付平台-账户中心-设置APIv3秘钥
wx_serial_no|证书序列号|微信支付平台-账户中心-API安全-API证书管理-证书序列号（若没有则申请新证书）
wx_private_key|商户证书内容|微信支付平台-账户中心-API安全-API证书管理-与证书序列号一一对应内容为生成的apiclient_key.pem文件全部内容

**系统配置(sys_config)**
字段|描述|注意
-|:-:|-:
registration_method|注册模式 1 账号密码 2 邮箱注册 3 公众号 |开启邮件注册后需要在emil_config中配置邮件相关参数
default_times|默认注册次数|用户注册时默认赠送请求次数
gpt_url|gpt请求地址|可使用官方或替换第三方
gpt4_url|gpt4请求地址|可使用官方或替换第三方
is_open_gpt|gpt开关 0-未开启、1-开启gpt3.5、2-开启gpt4.0、3-全部|默认开启3.5
is_open_gpt_official|gpt画图开关 0-未开启、1-开启|默认关闭
img_upload_url|图片上传地址|例如：/usr/local 配置图片上传路径
img_return_url|图片域名前缀|上传图片后与图片名组合成可访问的url 例如：https://baidu.com 图片上传成功后 则返回 https://baidu.com /2023/04/26/2222.jpg
api_url|后台接口地址|用于mj、支付、微信等回调使用
client_url|客户端页面地址|用于支付跳转等
is_open_sd|是否开启sd 0未开启 1开启|无
sd_url|Sd接口地址|开启sd时需配置这个地址
is_open_flag_studio|是否开启FlagStudio 0-未开启 1开启|无
flag_studio_key|FlagStudio key|登录之后api获得每天500次请求
flag_studio_url|FlagStudio 接口地址|暂时写死https://flagopen.baai.ac.cn/flagStudio
baidu_appid|百度appid|用于百度翻译
baidu_secret|百度Secret|用于百度翻译
baidu_key|百度应用key|用于敏感词检查
baidu_secret_key|百度应用Secret|用于敏感词检查
is_open_mj|是否开启mj 0-未开启 1开启|无
is_open_proxy|是否开启代理 0关闭 1开启|无
proxy_ip|代理ip|无
proxy_port|代理端口|无
bing_cookie|微软bing cookie|无
is_open_bing|是否开启bing 0-未开启 1开启|无
is_open_stable_studio|是否开启StableStudio 0未开启 1 开启|无
stable_studio_api|StableStudioapi地址前缀|写死：https://api.stability.ai
stable_studio_key|StableStudio key|无
client_logo|客户端logo地址|无
client_name|客户端名字|无
bard_token|谷歌BardToken|格式为aAjs4boxxxx;sidts-xxxx 注意中间';'


## 💪  Contributors

<a href="https://github.com/a616567126/GPT-WEB-JAVA/graphs/contributors"><img src="https://opencollective.com/gpt-web-java/contributors.svg?width=890&button=false" /></a>


## 🥤  Reward（有能力的可以请作者喝一杯冰可落）
- 支付宝  

<img src="https://user-images.githubusercontent.com/43660702/228105535-144d09cd-6326-4c22-b9b9-8c69c299caac.png" width="100px" height="100px">  

- 微信  

<img src="https://user-images.githubusercontent.com/43660702/228105188-09c49078-9156-40bc-8327-f2b05c5bc5fa.png" width="100px" height="100px"> 


## ⭐  记得点一个Star哦!!!!

## ✉  Scan code to add friends（扫码添加微信好友）
![扫码添加好友](https://user-images.githubusercontent.com/43660702/232187172-9d971a97-b7a3-407f-9ba1-a35516505733.jpeg)



## 🎯  Pay attention to the official account（关注公众号）

![关注公众号](https://github.com/a616567126/GPT-WEB-JAVA/assets/43660702/04f9f971-fe57-4b6a-8aa6-6f0dda987117)


## 
[![Star History Chart](https://api.star-history.com/svg?repos=a616567126/GPT-WEB-JAVA&type=Timeline)](https://star-history.com/#a616567126/GPT-WEB-JAVA&Timeline)  


## SPONSOR
本项目由[JetBranins](https://www.jetbrains.com/?from=Unity3DTraining)赞助相关开发工具  
<a href="https://www.jetbrains.com/?from=Unity3DTraining"><img src="https://github.com/XINCGer/Unity3DTraining/blob/master/Doc/images/jetbrains.png" width = "150" height = "150" div align=center /></a>  


## License

Apache License 2.0
